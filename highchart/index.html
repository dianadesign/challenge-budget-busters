<html>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/heatmap.js"></script>
<script src="https://code.highcharts.com/modules/treemap.js"></script>
<div id="container"></div>
<script>
var cheltuieli = [{
                    id: 'curente',
                    name: 'Cheltuieli Curente',
                    color: '#00FF00'
                },
                {
                    name: 'Personal',
                    parent: 'curente',
                    value: 117366
                },
                {
                    name: 'Bunuri',
                    parent: 'curente',
                    value: 590569
                },
                {
                    name: 'Dobanzi',
                    parent: 'curente',
                    value: 124540
                },
                {
                    name: 'Subventii',
                    parent: 'curente',
                    value: 1059000
                },
                {
                    name: 'Rezerva',
                    parent: 'curente',
                    value: 12175
                },
                {
                    name: 'Transferuri',
                    parent: 'curente',
                    value: 627437
                },
                {
                    name: 'Alte Transferuri',
                    parent: 'curente',
                    value: 73878
                },
                {
                    name: 'Proiecte Finantate din Fonduri Nerambursabile Europene',
                    parent: 'curente',
                    value: 463174
                },
                {
                    name: 'Asistenta Sociala',
                    parent: 'curente',
                    value: 1682
                },
                {
                    name: 'Alte Cheltuieli',
                    parent: 'curente',
                    value: 112860
                },
                {
                    name: 'Capital',
                    value: 823638,
                    color: '#0000FF'
                },
                {
                    name: 'Operatiuni Financiare',
                    id: 'operatiuni',
                    color: '#FF0000'
                },
                {
                    name: 'Imprumuturi Acordate',
                    parent: 'operatiuni',
                    value: 0
                },
                {
                    name: 'Rambursari Credite',
                    parent: 'operatiuni',
                    value: 133677
                },
                {
                    name: 'Plati Efectuate Si Recuperate',
                    color: '#FFFF00',
                    value: 0
                },
                {
                    name: 'Rezerve',
                    color: '#00FFFF',
                    value: 0
                }];

var venituri = [{
    name: 'Venituri Curente',
    color: '#FF0000',
    id: 'curente'
},
{
    name: 'Fiscale',
    color: '#00FF00',
    parent: 'curente',
    id: 'fiscale',
},
{
    name: 'Impozit Persoane Juridice',
    parent: 'fiscale',
    id: 'impozitPJ' 
},
{
    name: 'Profit',
    parent: 'impozitPJ',
    value: 0
},
{
    name: 'Impozit Persoane Fizice',
    parent: 'fiscale',
    id: 'impozitPF'
},
{
    name: 'Transfer',
    parent: 'impozitPF',
    value: 66000
},
{
    name: 'Cote si Sume Defalcate din Impozitul pe Venit',
    parent: 'impozitPF',
    value: 3345410
},
{
    name: 'Alte',
    parent: 'fiscale',
    value: 0
},
{
    name: 'Proprietate',
    parent: 'fiscale',
    value: 0
},
{
    name: 'Impozite',
    parent: 'fiscale',
    id: 'impozite',
},
{
    name: 'Sume',
    parent: 'impozite',
    value: 20108
},
{
    name: 'Alte',
    parent: 'impozite',
    value: 0
},
{
    name: 'Taxe Servicii',
    parent: 'impozite',
    value: 0
},
{
    name: 'Taxe Bunuri',
    parent: 'impozite',
    value: 20600
},
{
    name: 'Alte Impozite',
    parent: 'fiscale',
    value: 10000
},
{
    name: 'Nefiscale',
    parent: 'curente',
    value: 168041,
    color: '#0000FF'
},
{
    name: 'Capital',
    value: 5015,
    color: '#FFFF00'
},
{
    name: 'Financiare',
    value: 0
},
{
    name: 'Subventii',
    id: 'subventii',
},
{
    name: 'Stat',
    parent: 'subventii',
    value: 65315,
    color: '#00FFFF'
},
{
    name: 'Administratii',
    parent: 'subventii',
    value: 0
},
{
    name: 'Uniunea Europeana',
    value: 220509
}];

$(function () {
    $('#container').highcharts({
        series: [{
            type: 'treemap',
            layoutAlgorithm: 'squarified',
            allowDrillToNode: true,
            animationLimit: 1000,
            dataLabels: {
                enabled: false
            },
            levelIsConstant: false,
            levels: [{
                level: 1,
                dataLabels: {
                    enabled: true
                },
                borderWidth: 3
            }],
            data: cheltuieli,
            events: {
                click: function (event) {
                    console.log(event.point.name);
                }
            }
        }],
        title: {
            text: 'Bugetul Municipiului Bucuresti - Cheltuieli'
        }
    });
});
</script>